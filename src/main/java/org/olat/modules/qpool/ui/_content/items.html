#if($r.available("delete.collection") || $r.available("rename.collection"))
	<div id="qtoolbar" class="b_clearfix o_qpool_button_bar_box">
		<div class="o_qpool_toolbar">
			$r.render("rename.collection")
			$r.render("delete.collection")
		</div>
	</div>
#end
<div id="qpoolcontainer">
	<div id="qitems" class="pane ui-layout-north">$r.render("items")</div>
	<div id="qdetails" class="pane ui-layout-center">$r.render("details")</div>
	<div id="qpreview" class="pane ui-layout-west">$r.render("preview")</div>
</div>
<div id="qbuttons" class="b_clearfix o_qpool_button_bar_box">
	<div class="o_qpool_button_bar">
		$r.render("select.item")
		#if($r.available("delete.item"))
			$r.render("delete.item")
		#end
	</div>
</div>
<script type="text/javascript">
jQuery(function() {
	var width = jQuery('#b_col3_content_inner').width();
	var winHeight = jQuery(window).height();
	var headerHeight = jQuery('#b_header').height() + jQuery('#b_nav_main').height();
	var footerHeight = jQuery('#b_footer').height() + jQuery('#qbuttons').height();
	var maxHeight = winHeight - headerHeight - footerHeight - 50;
	## padding arount table = relative position of table (space for search field) + height of action buttons below table + some extra space
	var dataTablesPos = jQuery('.dataTables_wrapper').position()
	var panePadding = (dataTablesPos ? dataTablesPos.top : 0) + jQuery('.o_qpool_button_bar_box').height() + 80;

	jQuery('#qpoolcontainer').width(width).height(maxHeight).layout({
		north: { size: '50%' },
		center: { size: '50%' },
		north__onresize: function (pane, ui) {
			var paneHeight = ui.height();
			jQuery('#$tableId').each(function(index, el) {
				var table = jQuery(el).dataTable();
				var oSettings = table.fnSettings();
				oSettings.oScroll.sY = (paneHeight - panePadding) + "px";
				jQuery('div.dataTables_scrollBody', jQuery('#qitems')).height(paneHeight - panePadding);
			});
		},
		west: { size: '50%' },
		south: {}
	});
	
	jQuery('#$tableId').each(function(index, el) {
		var paneHeight = jQuery('#qitems').height();
		var table = jQuery(el).dataTable();
		var oSettings = table.fnSettings();
		oSettings.oScroll.sY = (paneHeight - panePadding) + "px";
		jQuery('div.dataTables_scrollBody', jQuery('#qitems')).height(paneHeight - panePadding);
	});
});
</script>