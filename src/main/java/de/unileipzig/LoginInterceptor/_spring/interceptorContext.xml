<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="
  http://www.springframework.org/schema/beans 
  http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
  http://www.springframework.org/schema/context 
  http://www.springframework.org/schema/context/spring-context-3.0.xsd">

	<!--
		OLAT extensions are searched on the whole classpath by spring startup
		and are enabled by default. Spring searches for alles files with name
		"xyzContext.xml" (Context with capital C). To keep your extensions
		outside the war file place them in tomcat/lib directory which is part
		of the java classpath.
	-->

	<!--
		Locations that implement action extensions are:
		SystemAdminMainController, HomeMainController, ArchiverMaincontroller
	-->

	<bean id="InterceptorExtension" class="de.unileipzig.LoginInterceptor.InterceptorExtension"
		depends-on="org.olat.core.util.notifications.NotificationsManager, 
database, baseSecurityManager, triggerI18nModuleInit"
		init-method="init">
		<constructor-arg index="0" ref="afterLoginInterceptionManager" />
		<!--
			<constructor-arg index="0"
			value="${default.auth.provider.identifier}" /> <constructor-arg
			index="1" ref="userManager" /> <constructor-arg index="2"
			ref="afterLoginInterceptionManager" />
		-->
		<property name="persistedProperties">
			<bean class="org.olat.core.configuration.PersistedProperties"
				scope="prototype" init-method="init" destroy-method="destroy">
				<constructor-arg index="0" ref="coordinatorManager" />
				<constructor-arg index="1" ref="InterceptorExtension" />
			</bean>
		</property>
		<property name="afterLoginConfig">

			<!--
				enable Controllers or add others if you want them presented right
				after the Login of a user in an overlay.
			-->

			<bean id="org.olat.user.AfterLoginConfig" class="org.olat.login.AfterLoginConfig"
				scope="prototype">
				<property name="afterLoginControllerList">
					<list>
						<map>
							<entry key="controller">
								<bean class="org.olat.core.gui.control.creator.AutoCreator"
									scope="prototype">
									<property name="className"
										value="de.unileipzig.LoginInterceptor.controller.InterceptorController" />
								</bean>
							</entry>
							<entry key="forceUser">
								<value>true</value>
							</entry>
							<entry key="redoTimeout">
								<value>0</value>
							</entry>
							<!--
								<entry key="i18nIntro">
								<value>org.olat.core.commons.controllers.resume:resume</value>
								</entry>
							-->
							<entry key="size">
								<value>700x300</value>
							</entry>
							<entry key="order">
								<value>500</value>
							</entry>

						</map>
					</list>
				</property>
			</bean>
		</property>
	</bean>
</beans>
