<html>
<head>
<title>Statistics for ${server.domainname}</title>
<meta http-equiv="refresh" content="300;">
<script src="cookies.js" type="text/javascript"></script>
<SCRIPT LANGUAGE="JavaScript" type="text/javascript"><!--
Stamp = new Date();
var year = Stamp.getYear();
if (year < 2000) year = 1900 + year;
var month = Stamp.getMonth()+1;
var date = Stamp.getDate();
var thishour = Stamp.getHours()
var thismin = Stamp.getMinutes()
if (thismin < 10) thismin = "0" + thismin;


function toggle(domid) {

	var cookie = "";
	if (getCookieValue("statsconfig")) {
		cookie = getCookieValue("statsconfig")
	}
	var debug = "old::" + cookie;
	
	var elem = document.getElementById(domid);
	if (elem == null) return;
	var toggler = document.getElementById(domid + "_t");
	if (toggler == null) return;
	
	var start = cookie.indexOf(domid + ";");

	if (elem.style.display == "none") {
		elem.style.display = "block";
		toggler.className="visible";
		if (start >= 0) {
			cookie = cookie.substr(0,start) + cookie.substr(start+1 + domid.length);
		}
	} else {
		elem.style.display = "none";	
		toggler.className="hidden";
		if (start < 0) {
			cookie = cookie + domid + ";";	
	}
}
	writePersistentCookie("statsconfig", cookie, "years", 1);
//	alert(debug + " new::" + cookie);
}

function initToggles() {
	var cookie = "";
	if (getCookieValue("statsconfig")) {
		cookie = getCookieValue("statsconfig")
	}
	hidden = cookie.split(";");
	for (var i = 0; i < hidden.length; i++) {
		toggle(hidden[i]);	
	}
}

function showAll() {
	deleteCookie("statsconfig");
	window.location.reload();
}


// --></SCRIPT>
<style>
a.visible{
	color: green;
}
a.hidden {
	color: red;
}

</style>

</head>
<body bgcolor=white onload="initToggles()">
<div style="float: right"><i>
<SCRIPT LANGUAGE="JavaScript"><!--
document.write("Timestamp: " + date + "." + month + "." + year + ", " + thishour + ":" + thismin)
// --></SCRIPT>
</i></div>
<h2>Some cool statistics about the OLAT server usage:</h2>
<p style="clear: both">

<i>In this graphics the timeline is running from the very left side, which represents now, to the right side, which represents the past. 
Click on the graphic titles to get more detailed informations about this item. <b>Click the items to toggle the stats on and off</b>.

</i>
<p>
OLAT: <a href="#" id="users_t" onclick="toggle('users')" class="visible">Users</a> | 
<a href="#" id="webdav_t" onclick="toggle('webdav')" class="visible">Webdav Users</a> | 
<a href="#" id="im_t" onclick="toggle('im')" class="visible">IM users</a> | 
<a href="#" id="vmmem_t" onclick="toggle('vmmem')" class="visible">VM memory</a> | 
<a href="#" id="jstat_t" onclick="toggle('jstat')" class="visible">Full GC</a> | 
<a href="#" id="proc_t" onclick="toggle('proc')" class="visible">Threads</a> | 
<a href="#" id="err_t" onclick="toggle('err')" class="visible">Errors</a> | 
<a href="#" id="debug_t" onclick="toggle('debug')" class="visible">Controllers</a> |
<a href="#" id="usercount_t" onclick="toggle('usercount')" class="visible">User accounts</a> |
<a href="#" id="usersdaily_t" onclick="toggle('usersdaily')" class="visible">act. users daily</a> |
<a href="#" id="usersmonthly_t" onclick="toggle('usersmonthly')" class="visible">act. users monthly</a> |
<a href="#" id="coursecount_t" onclick="toggle('coursecount')" class="visible">Courses</a>
<br>
SYSTEM:  
<a href="#" id="mem_t" onclick="toggle('mem')" class="visible">Memory</a> | 
<a href="#" id="apache_t" onclick="toggle('apache')" class="visible">Apache/MySQL</a> | 
<a href="#" id="cpu_t" onclick="toggle('cpu')" class="visible">CPU</a> | 
<a href="#" id="disk_t" onclick="toggle('disk')" class="visible">Disk</a> |
<a href="#" id="iostat_t" onclick="toggle('iostat')" class="visible">IOstat</a> |
<a href="#" id="ping_t" onclick="toggle('ping')" class="visible">Network</a>
<br>
<a href="#" onclick="showAll()">Clear</a>

<table id="users">
<tr><td colspan=2>
<br>
<h3><a href='olat_users.html'>Users currently working online via webbrowser:</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_users-day.png'>
</td><td><img src='olat_users-week.png'>
</td></tr>
</table>

<table id="webdav">
<tr><td colspan=2>
<br>
<h3><a href='olat_webdav.html'>Users currently working online using WebDAV:</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_webdav-day.png'>
</td><td><img src='olat_webdav-week.png'>
</td></tr>
</table>

<table id="im">
<tr><td colspan=2>
<br>
<h3><a href='olat_imstats.html'>Users currently logged into the instant messaging system:</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_imstats-day.png'>
</td><td><img src='olat_imstats-week.png'>
</td></tr>
</table>


<table id="vmmem">
<tr><td colspan=2>
<br>
<h3><a href='olat_vmmem.html'>OLAT Virtual machine memory: used green and available blue</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_vmmem-day.png'>
</td><td><img src='olat_vmmem-week.png'>
</td></tr>
</table>

<table id="jstat">
<tr><td colspan=2>
<br>
<h3><a href='olat_jstat.html'>OLAT: Full garbage collection: number green and time blue</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_jstat-day.png'>
</td><td><img src='olat_jstat-week.png'>
</td></tr>
</table>

<table id="proc">
<tr><td colspan=2>
<br>
<h3><a href='olat_proc.html'>OLAT threads: concurrent dispatching threads (green) and active threads (blue)</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_proc-day.png'>
</td><td><img src='olat_proc-week.png'>
</td></tr>
</table>

<table id="err">
<tr><td colspan=2>
<br>
<h3><a href='olat_err.html'>OLAT errors: number of new errors per 5 minutes</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_err-day.png'>
</td><td><img src='olat_err-week.png'>
</td></tr>
</table>

<table id="debug">
<tr><td colspan=2>
<br>
<h3><a href='olat_debug.html'>OLAT runtime controllers</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_debug-day.png'>
</td><td><img src='olat_debug-week.png'>
</td></tr>
</table>

<table id="usercount">
<tr><td colspan=2>
<br>
<h3><a href='olat_usercount.html'>OLAT user accounts</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_usercount-day.png'>
</td><td><img src='olat_usercount-week.png'>
</td></tr>
</table>

<table id="usersdaily">
<tr><td colspan=2>
<br>
<h3><a href='olat_usercountdaily.html'>Active users within last day and last week:</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_usercountdaily-day.png'>
</td><td><img src='olat_usercountdaily-week.png'>
</td></tr>
</table>

<table id="usersmonthly">
<tr><td colspan=2>
<br>
<h3><a href='olat_usercountmonthly.html'>Active users within last month and last six months:</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_usercountmonthly-day.png'>
</td><td><img src='olat_usercountmonthly-week.png'>
</td></tr>
</table>

<table id="coursecount">
<tr><td colspan=2>
<br>
<h3><a href='olat_coursecount.html'>OLAT courses</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_coursecount-day.png'>
</td><td><img src='olat_coursecount-week.png'>
</td></tr>
</table>


<!-- server related data -->

<table id="mem">
<tr><td colspan=2>
<br>
<h3><a href='olat_mem.html'>Server memory (excluding buffered and cached memory, green) and swap (blue) usage</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_mem-day.png'>
</td><td><img src='olat_mem-week.png'>
</td></tr>
</table>


<table id="apache">
<tr><td colspan=2>
<br>
<h3><a href='apach_count.html'>Number of running apache (green) and mysql (blue) processes</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='apach_count-day.png'>
</td><td><img src='apach_count-week.png'>
</td></tr>
</table>

<table id="cpu">
<tr><td colspan=2>
<br>
<h3><a href='olat_cpu.html'>OLAT CPU Load</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_cpu-day.png'>
</td><td><img src='olat_cpu-week.png'>
</td></tr>
</table>

<table id="disk">
<tr><td colspan=2>
<br>
<h3><a href='olat_diskusage.html'>OLAT /usr/local/olatfs disk space usage: du versus df</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_diskusage-day.png'>
</td><td><img src='olat_diskusage-week.png'>
</td></tr>
</table>

<table id="iostat">
<tr><td colspan=2>
<br>
<h3><a href='olat_iostat_sde1.html'>OLAT /usr/local iostat: read and write </a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='olat_iostat_sde1-day.png'>
</td><td><img src='olat_iostat_sde1-week.png'>
</td></tr>
</table>

<table id="ping">
<tr><td colspan=2>
<br>
<h3><a href='uni-link.html'>Link availability to external networks: www.google.com (ping)</a></h3>
</td></tr>
<tr><td align=center>daily</td><td align=center>weekly</td></tr>
<tr><td>
<img src='uni-link-day.png'>
</td><td><img src='uni-link-week.png'>
</td></tr>
</table>


<p>
<font size=-2>2001-2008 &copy; by <a href="http://www.id.uzh.ch/mels">Multimedia & eLeanring Center University of Zuerich</a></font>
</body></html>
