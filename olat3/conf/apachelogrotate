#
# This file can be used to rotate the apache config files.
# Make sure this logfiles exist on your system. 
# On an OpenSuSE distribution you just have to move this file
# to /etc/logrotate.d/ to enable the log rotating.
#
# PLEASE CHECK:
# - that the user/group is the same as on your system: we use olat/www
# - that the apache command is correct: we use /etc/inid.apache2
#
# 16.08.2006 (fg)

${log.dir}/olat.std..log
${log.dir}/olat.std.error.log
${log.dir}/olat.ssl..log
${log.dir}/olat.ssl.error.log
${log.dir}/olattest.std..log
${log.dir}/olattest.std.error.log
${log.dir}/olattest.ssl..log
${log.dir}/olattest.ssl.error.log
${log.dir}/mod_jk.log
${log.dir}/monitoring.log
{
  notifempty
  missingok
  compress
  dateext
  maxage 365
  rotate 365
  size +100M
  copytruncate
  postrotate
    cd ${log.dir} || exit 1
    tdir=${log.dir}/archive
    [ -d "${tdir}" ] || exit 1
    for fn in *.gz *.bz *.bz2 ; do
       [ ! -f "${fn}" ] && continue
       [ -h "${fn}" ] && continue
       mv -v --reply=no --target-directory=${tdir} "${fn}"
    done
  endscript

}
/usr/local/var/httpd/log/httpd.ext.err
/usr/local/var/httpd/log/httpd.ext.log
/usr/local/var/httpd/log/sslPPD.log
{
  notifempty
  missingok
  compress
  dateext
  maxage 365
  rotate 365
  size +4096k
  copytruncate
  postrotate
    cd /usr/local/var/httpd/log || exit 1
    tdir=${log.dir}/archive
    [ -d "${tdir}" ] || exit 1
    for fn in *.gz *.bz *.bz2 ; do
       [ ! -f "${fn}" ] && continue
       [ -h "${fn}" ] && continue
       mv -v --reply=no --target-directory=${tdir} "${fn}"
    done
  endscript
}
${tomcat.home}/logs/catalina.out
${tomcat.home}/logs/tomcat_id.log
{
  notifempty
  missingok
  compress
  dateext
  maxage 365
  rotate 365
  size +4096k
  copytruncate
  postrotate
    cd ${tomcat.home}/logs || exit 1
    tdir=${log.dir}/archive
    [ -d "${tdir}" ] || exit 1
    for fn in *.gz *.bz *.bz2 ; do
       [ ! -f "${fn}" ] && continue
       [ -h "${fn}" ] && continue
       mv -v --reply=no --target-directory=${tdir} "${fn}"
    done
  endscript
}

